<!doctype html>
<html lang="en-US">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <script type="text/javascript" src="data/sinaFutures/logAll.json"></script>
    <script type="text/javascript">
    function ttt(filterType = "low", sortType = "name") {
        if (filterType == "low") {
            var log20AllRes = log20All.filter(ele => ele[4] < 0)
            var log30AllRes = log30All.filter(ele => ele[4] < 0)
            var log50AllRes = log50All.filter(ele => ele[4] < 0)
            var log70AllRes = log70All.filter(ele => ele[4] < 0)
        }

        if (filterType == "up") {
            var log20AllRes = log20All.filter(ele => ele[4] > 0)
            var log30AllRes = log30All.filter(ele => ele[4] > 0)
            var log50AllRes = log50All.filter(ele => ele[4] > 0)
            var log70AllRes = log70All.filter(ele => ele[4] > 0)
        }


        function hasSameNameStart(testItem) {
            let res = false
            for (var i = 0; i < resultArr.length; i++) {
                if ((resultArr[i][0] + resultArr[i][1]) == (testItem[0] + testItem[1])) {
                    res = true
                }
            }
            return res
        }




        logContact = [...log20AllRes, ...log50AllRes]
        logContact.sort(function(a, b) {
            if (a[0] === b[0]) { //name
                if (a[4] > b[4]) { //percnet
                    return 1;
                } else if (a[4] < b[4]) {
                    return -1;
                } else {
                    return 0;
                }
            } else {
                if (a[0] > b[0]) {
                    return 1;
                } else {
                    return -1;
                }
            }
        })


        let resultArr = []


        for (var i = 0; i < logContact.length; i++) {
            if (hasSameNameStart(logContact[i])) continue
            resultArr.push(logContact[i])
        }


        let resultArrSortName = resultArr
        let resultArrSortPercent = [...resultArrSortName]
        if (filterType == "up") resultArrSortPercent = resultArrSortPercent.sort((a, b) => b[4] - a[4])
        if (filterType == "low") resultArrSortPercent = resultArrSortPercent.sort((a, b) => a[4] - b[4])



        if (sortType == "name") return resultArrSortName
        if (sortType == "percent") return resultArrSortPercent
    }



    function returnSameNameStart(logAll, testItem) {
        let res = false
        for (var i = 0; i < logAll.length; i++) {
            if ((logAll[i][0] + logAll[i][1]) == (testItem[0] + testItem[1])) {
                res = logAll[i]
            }
        }
        return res
    }




    var zhisun = []
    var chiyoudao = []

    function test() {

        for (let i = 0; i < log10All.length; i++) {
            if (log10All[i][4] < 0) 
            {
                zhisun.push(log10All[i])
            } 
            else 
            {
                let same30 = returnSameNameStart(log30All, log10All[i])
                if( same30[4] < 0 )
                {
                   zhisun.push(same30)
                }
                else
                {
                    let same50 = returnSameNameStart(log50All, log10All[i])
                    chiyoudao.push(same50)
                }
                
            }
        }
    }
    test()

    console.log(zhisun.sort((a, b) => a[4] - b[4]), chiyoudao.sort((a, b) => b[4] - a[4]))


    // console.log(
    //     ttt("low", "name"),
    //     ttt("low", "percent"),
    //     ttt("up", "name"),
    //     ttt("up", "percent")
    // )
    </script>
</head>

<body>
</body>

</html>